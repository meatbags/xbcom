var XB=function(t){function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}var e={};return i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=2)}([function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o={Global:{fogColour:16377314,fogDensity:.009,timeDeltaMax:.05},Loader:{glassOpacity:.5,lightMapIntensity:1},Area:{collision:{min:-125,max:375},walk:{min:-125,max:375}},Player:{height:1.9,position:{x:0,y:0,z:0},rotation:{pitch:0,yaw:.29*Math.PI,roll:0,maxPitch:.25*Math.PI,minPitch:-.25*Math.PI},speed:{normal:9,slowed:5,rotation:.75*Math.PI,jump:13,fallTimerThreshold:.1},climb:{up:1,down:.5,minPlaneYAngle:.55}},Ship:{position:{x:270,y:32,z:270},speed:20,rotation:{pitch:0,yaw:.29*Math.PI,roll:0,maxRoll:.5}},HUD:{turnThreshold:.4,maxYawRotation:.3*Math.PI},Camera:{fov:58,aspect:1,near:.1,far:1e4},Physics:{gravity:12,maxVelocity:50},Adjust:{verySlow:.01,slow:.025,normal:.05,fast:.09,rapid:.12,veryFast:.2}};i.default=o},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=2*Math.PI,n=Math.PI/2,s=function(t,i,e){return t<i?t+=e-i:t>e&&(t-=e-i),t},a=function(t){return new THREE.Vector3(t.x,t.y,t.z)},r=function(t,i){return new THREE.Vector3(t.x+i.x,t.y+i.y,t.z+i.z)},h=function(t,i){return new THREE.Vector3(t.x-i.x,t.y-i.y,t.z-i.z)},l=function(t){var i=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z);return 0==i?t:new THREE.Vector3(t.x/i,t.y/i,t.z/i)},c=function(t){return t.x*=-1,t.y*=-1,t.z*=-1,t},u=function(t,i){return Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2)+Math.pow(i.z-t.z,2))},d=function(t,i){return Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.z-t.z,2))},p=function(t,i){var e=d(t,i),o=i.y-t.y;return Math.atan2(o,e)},f=function(t,i){return Math.atan2(i.x-t.x,i.z-t.z)},m=function(t,i){return new THREE.Vector3(t.x*i,t.y*i,t.z*i)},g=function(t,i){return t.x===i.x&&t.y===i.y&t.z===i.z},y=function(t,i){return new THREE.Vector3(t.y*i.z-t.z*i.y,t.z*i.x-t.x*i.z,t.x*i.y-t.y*i.x)},w=function(t,i){return Math.atan2(Math.sin(i-t),Math.cos(i-t))},v=function(t,i){return t.x*i.x+t.y*i.y+t.z*i.z};i.wrap=s,i.copyVector=a,i.isVectorEqual=g,i.yawBetween=f,i.pitchBetween=p,i.halfPi=n,i.twoPi=o,i.distanceBetween=u,i.distanceBetween2D=d,i.minAngleDifference=w,i.dotProduct=v,i.addVector=r,i.subtractVector=h,i.scaleVector=m,i.crossProduct=y,i.reverseVector=c,i.normalise=l},function(t,i,e){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}var n=e(3),s=o(n),a=e(0),r=o(a),h={init:function(){h.renderer=new THREE.WebGLRenderer({antialias:!1}),h.renderer.setClearColor(r.default.Global.fogColour,1),document.getElementById("wrapper").appendChild(h.renderer.domElement),h.scene=new s.default(h.renderer.domElement),h.bindEvents(),h.loading()},bindEvents:function(){window.onresize=h.resize,h.resize()},resize:function(){var t=window.innerWidth,i=window.innerHeight;h.renderer.setSize(t,i),h.renderer.domElement.width=t,h.renderer.domElement.height=i,h.scene.resize()},loading:function(){h.scene.isLoaded()?(h.removeLoadingScreen(),h.hud(),h.time=(new Date).getTime(),h.loop()):requestAnimationFrame(h.loading)},showControls:function(){h.scene.player.ship.active&&$(".hud__inner").removeClass("hidden"),$(".hud__button").removeClass("hidden")},hideControls:function(){$(".hud__inner").hasClass("hidden")||$(".hud__inner").addClass("hidden"),$(".hud__button").hasClass("hidden")||$(".hud__button").addClass("hidden")},openMenu:function(t){h.closeMenu($(".hud-menu.active")),t.addClass("active"),t.children(".hud-menu__row").each(function(t,i){var e=$(i);setTimeout(function(){e.addClass("active")},100*t)})},closeMenu:function(t){t.removeClass("active"),t.children(".hud-menu__row").each(function(t,i){var e=$(i);setTimeout(function(){e.removeClass("active")},100*t)})},toggleMenu:function(t){t.hasClass("active")?h.closeMenu(t):h.openMenu(t)},hud:function(){h.navActive=!0,$(".nav-projects").on("click",function(){h.aboutOpened=!0,h.toggleMenu($("#menu-projects"))}),$(".nav-about").on("click",function(){h.aboutOpened=!0,h.toggleMenu($("#menu-about"))}),$(".nav-explore").on("click",function(){h.exploreOpened=!0,h.aboutOpened=!0;var t=$("#menu-explore");h.scene.player.ship.active?(h.scene.player.ship.land(),t.hasClass("active")||h.openMenu(t)):(h.scene.player.ship.takeOff(),t.hasClass("active")&&h.closeMenu(t))}),$(".menu-close").on("click",function(){h.toggleMenu($(this).closest(".hud-menu")),h.showControls()}),setTimeout(function(){h.aboutOpened||(h.aboutOpened=!0,h.toggleMenu($("#menu-about")))},3e3)},removeLoadingScreen:function(){$(".loading-screen__inner").fadeOut(1e3),$(".loading-screen").fadeOut(3e3)},loop:function(){requestAnimationFrame(h.loop);var t=(new Date).getTime(),i=(t-h.time)/1e3;h.time=t,h.scene.update(i>r.default.Global.timeDeltaMax?r.default.Global.timeDeltaMax:i),h.renderer.render(h.scene.scene,h.scene.camera)}};window.onload=h.init},function(t,i,e){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"__esModule",{value:!0});var n=e(4),s=o(n),a=e(7),r=o(a),h=e(0),l=o(h),c=e(8),u=o(c),d=function(t){this.domElement=t,this.init()};d.prototype={init:function(){var t=this;t.loader=new r.default("./assets/"),t.player=new s.default(t.domElement),t.camera=t.player.camera,t.scene=new THREE.Scene,t.scene.add(t.player.object),t.collider={objects:new Collider.System,ground:new Collider.System},t.loadMaps(),t.loadExtras(),t.loadLighting()},resize:function(){this.player.resizeCamera()},loadMaps:function(){var t=this;t.toLoad=3,this.loader.loadOBJ("map").then(function(i){var e=i.clone(),o=i.clone(),n=i.clone(),s=i.clone(),a=i.clone(),r=i.clone(),h=i.clone(),c=i.clone(),u=l.default.Area.walk.max-l.default.Area.walk.min;e.position.set(0,0,u),o.position.set(0,0,-u),n.position.set(u,0,0),s.position.set(-u,0,0),a.position.set(u,0,u),r.position.set(u,0,-u),h.position.set(-u,0,u),c.position.set(-u,0,-u),t.scene.add(i,e,o,n,s,a,r,h,c),t.toLoad-=1},function(t){throw t}),t.loader.loadOBJ("collision_map_ground").then(function(i){for(var e=0;e<i.children.length;e+=1)t.collider.ground.add(new Collider.Mesh(i.children[e].geometry));t.toLoad-=1},function(t){throw t}),t.loader.loadOBJ("collision_map_objects").then(function(i){for(var e=0;e<i.children.length;e+=1)t.collider.objects.add(new Collider.Mesh(i.children[e].geometry));t.toLoad-=1},function(t){throw t})},loadExtras:function(){var t=this;t.birds=[];for(var i=0;i<20;i+=1){var e=new u.default;t.birds.push(e),t.scene.add(e.object)}},loadLighting:function(){var t=this;t.lights={a1:new THREE.AmbientLight(16777215,.25),d1:new THREE.DirectionalLight(16777215,.5)},t.scene.add(t.lights.a1,t.lights.d1),t.scene.fog=new THREE.FogExp2(l.default.Global.fogColour,l.default.Global.fogDensity)},isLoaded:function(){return this.toLoad<=0},update:function(t){var i=this;i.player.update(t,i.collider.ground,i.collider.objects);for(var e=0;e<i.birds.length;e+=1)i.birds[e].update(t,i.player.position)}},i.default=d},function(t,i,e){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"__esModule",{value:!0});var n=e(1),s=function(t){if(t&&t.__esModule)return t;var i={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e]);return i.default=t,i}(n),a=e(5),r=o(a),h=e(0),l=o(h),c=e(6),u=(o(c),function(t){this.domElement=t,this.position=new THREE.Vector3(l.default.Player.position.x,l.default.Player.position.y,l.default.Player.position.z),this.rotation={pitch:l.default.Player.rotation.pitch,yaw:l.default.Player.rotation.yaw,roll:l.default.Player.rotation.roll},this.previous={position:new THREE.Vector3(l.default.Player.position.x,l.default.Player.position.y,l.default.Player.position.z)},this.movement=new THREE.Vector3(0,0,0),this.offset={rotation:{pitch:0,yaw:0}},this.target={position:new THREE.Vector3(l.default.Player.position.x,l.default.Player.position.y,l.default.Player.position.z),rotation:{pitch:l.default.Player.rotation.pitch,yaw:l.default.Player.rotation.yaw,roll:l.default.Player.rotation.roll},movement:new THREE.Vector3(0,0,0),offset:{rotation:{pitch:0,yaw:0,roll:0}}},this.falling=!1,this.fallTimer=0,this.config=l.default.Player,this.config.physics=l.default.Physics,this.config.hud=l.default.HUD,this.config.adjust=l.default.Adjust,this.config.area=l.default.Area,this.camera=new THREE.PerspectiveCamera(l.default.Camera.fov,l.default.Camera.aspect,l.default.Camera.near,l.default.Camera.far),this.camera.up=new THREE.Vector3(0,1,0),this.object=new THREE.Group,this.init()});u.prototype={init:function(){this.light=new THREE.PointLight(16777215,.5,25,2),this.light.position.set(0,1,0),this.object.add(this.light),this.ship=new r.default,this.bindControls(),this.resizeCamera()},update:function(t,i,e){this.handleInput(t),this.ship.update(t,this),this.ship.active?(this.movement.y=0,this.ship.target.rotation.yaw=this.target.rotation.yaw,this.target.rotation.roll=this.ship.rotation.roll,this.target.position.set(this.ship.position.x,this.ship.position.y,this.ship.position.z),this.position.set(this.ship.position.x,this.ship.position.y,this.ship.position.z)):(this.target.rotation.roll=0,this.checkCollisions(t,i,e)),this.move()},handleInput:function(t){if(this.keys.left||this.keys.right){var i=(this.keys.left?1:0)+(this.keys.right?-1:0);this.target.rotation.yaw+=this.config.speed.rotation*t*i}if(this.keys.up||this.keys.down){var e=(this.keys.up?1:0)+(this.keys.down?-1:0),o=this.rotation.yaw+this.offset.rotation.yaw,n=Math.sin(o)*this.config.speed.normal*e,s=Math.cos(o)*this.config.speed.normal*e;this.target.movement.x=n,this.target.movement.z=s}else this.target.movement.x=0,this.target.movement.z=0;this.jumped||(this.jumped=0),this.keys.jump&&(this.keys.jump=!1,this.jumped+=1,(0==this.movement.y||this.fallTimer<this.config.speed.fallTimerThreshold)&&(this.movement.y=this.config.speed.jump)),this.falling=0!=this.movement.y,this.falling?this.fallTimer+=t:this.fallTimer=0,this.falling?(this.movement.x+=(this.target.movement.x-this.movement.x)*this.config.adjust.slow,this.movement.z+=(this.target.movement.z-this.movement.z)*this.config.adjust.slow):(this.movement.x=this.target.movement.x,this.movement.z=this.target.movement.z)},checkCollisions:function(t,i,e){var o=s.addVector(s.scaleVector(this.movement,t),this.target.position),n=s.wrap(o.x,this.config.area.collision.min,this.config.area.collision.max)-o.x,a=s.wrap(o.z,this.config.area.collision.min,this.config.area.collision.max)-o.z;o.x+=n,o.z+=a;var r=e.collisions(o);if(this.movement.y=Math.max(this.movement.y-this.config.physics.gravity*t,-this.config.physics.maxVelocity),r.length>0){for(var h=0;h<r.length;h+=1){var l=r[h].ceilingPlane(o);null!=l.y&&l.plane.normal.y>=this.config.climb.minPlaneYAngle&&l.y-this.target.position.y<=this.config.climb.up&&(this.movement.y=0,l.y>=o.y&&(o.y=l.y))}r=e.collisions(o);for(var c=[],u=0;u<r.length;u+=1){var d=r[u].ceilingPlane(o);null!=d.y&&(d.plane.normal.y<this.config.climb.minPlaneYAngle||d.y-this.target.position.y>this.config.climb.up)&&c.push(r[u])}if(c.length>0){for(var p=s.copyVector(o),f=0;f<c.length;f+=1){p=c[f].nearest2DIntersect(this.target.position,o)}o.x=p.x,o.z=p.z;var m=0;r=e.collisions(o);for(var g=0;g<r.length;g+=1){var y=r[g].ceilingPlane(o);null!=y.y&&(y.plane.normal.y<this.config.climb.minPlaneYAngle||y.y-this.target.position.y>this.config.climb.up)&&(m+=1)}m>1&&(o.x=this.target.position.x,o.z=this.target.position.z)}}else if(this.movement.y<0){var w=s.copyVector(o);if(w.y-=this.config.climb.down,!this.falling&&i.collision(w)){var v=i.ceilingPlane(w);v.plane.normal.y>=this.config.climb.minPlaneYAngle&&(o.y=v.y,this.movement.y=0)}if(0!=this.movement.y&&e.collision(w)){var x=e.ceilingPlane(w);x.plane.normal.y>=this.config.climb.minPlaneYAngle&&(o.y=x.y,this.movement.y=0)}}if(0!=this.movement.y){var E=i.ceiling(new THREE.Vector3(o.x,0,o.z));null!=E&&o.y<=E?(o.y=E,this.movement.y=0):o.y<=0&&(o.y=0,this.movement.y=0)}o.x-=n,o.z-=a,this.target.position.x=o.x,this.target.position.y=o.y,this.target.position.z=o.z},move:function(){this.previous.position.x=this.target.position.x,this.previous.position.y=this.target.position.y,this.previous.position.z=this.target.position.z,this.wrapped=!1;var t=s.wrap(this.target.position.x,this.config.area.walk.min,this.config.area.walk.max),i=s.wrap(this.target.position.z,this.config.area.walk.min,this.config.area.walk.max);this.wrapped=t!=this.target.position.x||i!=this.target.position.z,this.wrapped&&(this.position.x=t+(this.position.x-this.target.position.x),this.position.z=i+(this.position.z-this.target.position.z),this.target.position.x=t,this.target.position.z=i),this.position.x+=(this.target.position.x-this.position.x)*this.config.adjust.veryFast,this.position.y+=(this.target.position.y-this.position.y)*this.config.adjust.rapid,this.position.z+=(this.target.position.z-this.position.z)*this.config.adjust.veryFast,this.rotation.yaw+=s.minAngleDifference(this.rotation.yaw,this.target.rotation.yaw)*this.config.adjust.fast,this.offset.rotation.yaw+=(this.target.offset.rotation.yaw-this.offset.rotation.yaw)*this.config.adjust.normal,this.rotation.yaw+=this.rotation.yaw<0?s.twoPi:this.rotation.yaw>s.twoPi?-s.twoPi:0,this.rotation.pitch+=(this.target.rotation.pitch-this.rotation.pitch)*this.config.adjust.normal,this.offset.rotation.pitch+=(this.target.offset.rotation.pitch-this.offset.rotation.pitch)*this.config.adjust.normal,this.rotation.roll+=(this.target.rotation.roll-this.rotation.roll)*this.config.adjust.fast;var e=this.rotation.pitch+this.offset.rotation.pitch,o=this.rotation.yaw+this.offset.rotation.yaw,n=this.position.y+this.config.height;this.camera.up.z=-Math.sin(this.rotation.yaw)*this.rotation.roll,this.camera.up.x=Math.cos(this.rotation.yaw)*this.rotation.roll,this.camera.position.set(this.position.x,n,this.position.z),this.camera.lookAt(new THREE.Vector3(this.position.x+Math.sin(o),n+Math.sin(e),this.position.z+Math.cos(o))),this.object.position.set(this.position.x,this.position.y,this.position.z)},handleKeyDown:function(t){switch(t.keyCode){case 38:case 87:this.keys.up=!0;break;case 37:case 65:this.keys.left=!0;break;case 40:case 83:this.keys.down=!0;break;case 39:case 68:this.keys.right=!0;break;case 32:this.keys.jump=!0}},handleKeyUp:function(t){switch(t.keyCode){case 38:case 87:this.keys.up=!1;break;case 37:case 65:this.keys.left=!1;break;case 40:case 83:this.keys.down=!1;break;case 39:case 68:this.keys.right=!1}},handleMouseDown:function(t){if(!this.mouse.locked){var i=this.domElement.getBoundingClientRect();this.mouse.active=!0,this.mouse.rotation.pitch=this.rotation.pitch,this.mouse.rotation.yaw=this.rotation.yaw,this.mouse.start.x=t.clientX/this.domElement.width*2-1,this.mouse.start.y=(t.clientY-i.y)/this.domElement.height*2-1}},handleMouseMove:function(t){if(this.mouse.active&&(!this.keys.left&&!this.keys.right||this.ship.active)){var i=this.domElement.getBoundingClientRect();this.mouse.x=t.clientX/this.domElement.width*2-1,this.mouse.y=(t.clientY-i.y)/this.domElement.height*2-1,this.mouse.delta.x=this.mouse.x-this.mouse.start.x,this.mouse.delta.y=this.mouse.y-this.mouse.start.y,this.target.rotation.yaw=this.mouse.rotation.yaw+this.mouse.delta.x;var e=this.mouse.rotation.pitch+this.mouse.delta.y;(e>this.config.rotation.maxPitch||e<this.config.rotation.minPitch)&&(e=Math.max(this.config.rotation.minPitch,Math.min(this.config.rotation.maxPitch,e)),this.mouse.start.y=this.mouse.y,this.mouse.rotation.pitch=e),this.target.rotation.pitch=e}},handleMouseUp:function(t){this.mouse.active=!1},resizeCamera:function(){var t=this.domElement.width,i=this.domElement.height;this.camera.aspect=t/i,this.camera.updateProjectionMatrix()},bindControls:function(){var t=this;t.keys={up:!1,down:!1,left:!1,right:!1,jump:!1},t.mouse={x:0,y:0,start:{x:0,y:0},delta:{x:0,y:0},rotation:{pitch:0,yaw:0},locked:!1,active:!1},t.domElement.addEventListener("click",function(t){},!1),t.domElement.addEventListener("mousedown",function(i){t.handleMouseDown(i)},!1),t.domElement.addEventListener("mousemove",function(i){t.handleMouseMove(i)},!1),t.domElement.addEventListener("mouseup",function(i){t.handleMouseUp(i)},!1),t.domElement.addEventListener("mouseleave",function(i){t.handleMouseUp(i)},!1),document.addEventListener("keydown",function(i){t.handleKeyDown(i)},!1),document.addEventListener("keyup",function(i){t.handleKeyUp(i)},!1)}},i.default=u},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=e(0),n=function(t){return t&&t.__esModule?t:{default:t}}(o),s=e(1),a=function(){this.active=!0,this.position=new THREE.Vector3(n.default.Ship.position.x,n.default.Ship.position.y,n.default.Ship.position.z),this.rotation={pitch:n.default.Ship.rotation.pitch,yaw:n.default.Ship.rotation.yaw,roll:n.default.Ship.rotation.roll},this.target={position:new THREE.Vector3(n.default.Ship.position.x,n.default.Ship.position.y,n.default.Ship.position.z),rotation:{pitch:n.default.Ship.rotation.pitch,yaw:n.default.Ship.rotation.yaw,roll:n.default.Ship.rotation.roll},bank:0,speed:n.default.Ship.speed},this.bank=0,this.speed=n.default.Ship.speed,this.config=n.default.Ship,this.config.area=n.default.Area,this.config.adjust=n.default.Adjust};a.prototype={update:function(t,i){if(this.active){this.speed+=(this.target.speed-this.speed)*this.config.adjust.slow;var e=this.config.adjust.slow*(0,s.minAngleDifference)(this.rotation.yaw,this.target.rotation.yaw);this.rotation.yaw+=e,this.target.position.x+=this.speed*Math.sin(this.rotation.yaw)*t,this.target.position.z+=this.speed*Math.cos(this.rotation.yaw)*t;var o=(0,s.wrap)(this.target.position.x,this.config.area.walk.min,this.config.area.walk.max),n=(0,s.wrap)(this.target.position.z,this.config.area.walk.min,this.config.area.walk.max);this.position.x=o+(this.position.x-this.target.position.x),this.position.z=n+(this.position.z-this.target.position.z),this.target.position.x=o,this.target.position.z=n,this.position.x+=(this.target.position.x-this.position.x)*this.config.adjust.veryFast,this.position.y+=(this.target.position.y-this.position.y)*this.config.adjust.verySlow,this.position.z+=(this.target.position.z-this.position.z)*this.config.adjust.veryFast}else this.target.position.x=this.position.x=i.position.x,this.target.position.y=this.position.y=i.position.y,this.target.position.z=this.position.z=i.position.z,this.target.rotation.yaw=this.rotation.yaw=i.rotation.yaw},takeOff:function(){this.active=!0,this.target.speed=n.default.Ship.speed,this.target.position.y=n.default.Ship.position.y},land:function(){this.active=!1,this.target.speed=this.speed=0,this.setBank(0),this.rotation.roll=this.target.rotation.roll},setBank:function(t){},toggle:function(){this.active=0==this.active}},i.default=a},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(){this.cvs=document.createElement("canvas"),this.ctx=this.cvs.getContext("2d"),this.init()};o.prototype={init:function(){document.body.append(this.cvs),this.setStyle()},setStyle:function(){this.cvs.style.position="fixed",this.cvs.width=window.innerWidth,this.cvs.style.pointerEvents="none",this.cvs.height=400,this.cvs.style.zIndex=10,this.cvs.style.top=0,this.cvs.style.left=0},clear:function(){this.ctx.clearRect(0,0,this.cvs.width,this.cvs.height)},print:function(){this.clear();for(var t=0;t<arguments.length;t+=1)this.ctx.fillText(arguments[t],20,20+20*t)}},i.default=o},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=e(0),n=function(t){return t&&t.__esModule?t:{default:t}}(o),s=function(t){this.basePath=t,this.init()};s.prototype={init:function(){this.materialLoader=new THREE.MTLLoader,this.objectLoader=new THREE.OBJLoader,this.materialLoader.setPath(this.basePath),this.objectLoader.setPath(this.basePath)},process:function(t,i){for(var e=0;e<t.children.length;e+=1){var o=t.children[e],s=i.materialsInfo[o.material.name];if(o.material=i.materials[o.material.name],s.map_ka){var a=o.geometry.attributes.uv.array,r=s.map_ka,h=(new THREE.TextureLoader).load(self.basePath+r);o.material.lightMap=h,o.material.lightMapIntensity=n.default.Loader.lightMapIntensity,o.geometry.addAttribute("uv2",new THREE.BufferAttribute(a,2))}o.material.map&&(o.material.color=new THREE.Color(16777215),-1!==o.material.map.image.src.indexOf(".png")&&(o.material.transparent=!0,o.material.side=THREE.DoubleSide),-1!=o.material.map.image.src.indexOf("glass")&&(o.material.transparent=!0,o.material.opacity=n.default.Loader.glassOpacity))}},loadOBJ:function(t){var i=this;return new Promise(function(e,o){try{i.materialLoader.load(t+".mtl",function(o){o.preload(),i.objectLoader.load(t+".obj",function(t){i.process(t,o),e(t)})})}catch(t){o(t)}})}},i.default=s},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=e(0),n=function(t){return t&&t.__esModule?t:{default:t}}(o),s=e(1),a=function(t){if(t&&t.__esModule)return t;var i={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e]);return i.default=t,i}(s),r=function(){this.min=n.default.Area.walk.min-(n.default.Area.walk.max-n.default.Area.walk.min),this.max=n.default.Area.walk.max+(n.default.Area.walk.max-n.default.Area.walk.min),this.range=this.max-this.min,this.rangeHalf=this.range/2,this.rotation={pitch:0,yaw:0,roll:0},this.age=0,this.speed=12,this.glide=!1,this.glideTimer=0,this.target={age:0,maxAge:0,position:new THREE.Vector3,rotation:{pitch:0,yaw:0,roll:0}},this.init()};r.prototype={init:function(){var t=new THREE.MeshBasicMaterial({color:8947848,side:THREE.DoubleSide}),i=new THREE.BufferGeometry,e=new THREE.BufferGeometry;i.addAttribute("position",new THREE.BufferAttribute(new Float32Array([0,0,-.1,0,0,.1,.2,0,0]),3)),e.addAttribute("position",new THREE.BufferAttribute(new Float32Array([0,0,-.1,0,0,.1,-.2,0,0]),3)),this.wing={left:new THREE.Mesh(i,t),right:new THREE.Mesh(e,t)},this.object=new THREE.Object3D,this.object.add(this.wing.left,this.wing.right),this.object.position.x=this.min+this.range*Math.random(),this.object.position.y=64*Math.random(),this.object.position.z=this.min+this.range*Math.random(),this.position=this.object.position,this.newTarget()},newTarget:function(){this.target.age=0,this.target.maxAge=10*Math.random(),this.target.position.x=this.min+this.range*Math.random(),this.target.position.y=32*Math.random()-4,this.target.position.z=this.min+this.range*Math.random(),this.target.rotation.yaw=a.yawBetween(this.position,this.target.position),this.target.rotation.pitch=a.pitchBetween(this.position,this.target.position)},update:function(t,i){this.target.age+=t,this.target.age>this.target.maxAge&&this.newTarget(),this.glide?(this.age+=4*t,this.glideTimer-=t,this.glideTimer<0&&(this.glide=!1)):(this.age+=Math.random()*t*8+10*t,Math.random()<.005&&(this.glide=!0,this.glideTimer=5*Math.random())),this.wing.left.rotation.z=Math.sin(this.age)*a.halfPi,this.wing.right.rotation.z=-Math.sin(this.age)*a.halfPi,this.rotation.yaw+=a.minAngleDifference(this.rotation.yaw,this.target.rotation.yaw)*n.default.Adjust.verySlow,this.rotation.pitch+=a.minAngleDifference(this.rotation.pitch,this.target.rotation.pitch)*n.default.Adjust.verySlow,this.object.rotation.y=this.rotation.yaw,this.position.x+=Math.sin(this.rotation.yaw)*t*this.speed,this.position.y+=Math.sin(this.rotation.pitch)*t*this.speed,this.position.z+=Math.cos(this.rotation.yaw)*t*this.speed;var e=this.position.x-i.x,o=this.position.z-i.z;e>this.rangeHalf?this.position.x-=this.range:e<-this.rangeHalf&&(this.position.x+=this.range),o>this.rangeHalf?this.position.z-=this.range:o<-this.rangeHalf&&(this.position.z+=this.range)}},i.default=r}]);